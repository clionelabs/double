<template name="assistantsInvoiceActualForm">
  <div class="invoice-printout {{#if not isEditable }}static{{/if}}">
    <header>
      Double Usage Report: {{customerFullName}}
    </header>
    <div class="summaries">
      <div class="service-period">
        <div class="line">
          <div class="key">Service Period: </div><div class="value">{{ formatDateMonth from }}</div>
        </div>
        <div class="line">
          <div class="key">To: </div><div class="value">{{ formatDateMonth to }}</div>
        </div>
      </div>
      <div class="calculations">
        <div class="minute">
          <div class="line">
            <div class="key">Time used this period: </div>
            <div class="value">{{formatDurationPrecise roundedTotalDurationToSecond}}</div>
          </div>
          <div class="line">
            <div class="key">Time Rebate available: </div>
            <div class="value">
              {{#if isEditable }}
              <input
                  class='rebate'
                  type='text'
                  value='{{formatDurationPrecise rebate }}'
                  >
              {{else}}
                {{formatDurationPrecise rebate}}
              {{/if}}
            </div>
          </div>
          <div class="line">
            <div class="key">Time payable: </div>
            <div class="value">{{formatDurationPrecise timePayable }}</div>
          </div>
        </div>
        <div class="money">
          <div class="line">
            <div class="key">Minute rate (HKD):</div>
            <div class="value">6.00</div>
          </div>
          <div class="line">
            <div class="key">Effective rate (HKD):</div>
            <div class="value">
              {{#if isEditable }}
                <input
                  class='effective-rate'
                  type='number'
                  inputmode="numeric"
                  step="0.01"
                  value='{{formatAmount effectiveRate}}'
                  >
              {{else}}
                {{formatAmount effectiveRate}}
              {{/if}}
            </div>
          </div>
          <div class="line">
            <div class="key">Total Usage Charge: </div>
            <div class="value">{{formatAmount timeBasedItemsTotal}}</div>
          </div>
        </div>
        <div class="total">
          <div class="line">
            <div class="key">Other Charges: </div>
            <div class="value">{{formatAmount oneTimePurchasesTotal}}</div>
          </div>
          <div class="line">
            <div class="key">Payment {{ debitedOrDue }} (HKD)</div>
            <div class="value">{{formatAmount debit}}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="breakdown">

      {{>Template.dynamic template=showTimeBasedItems }}
      {{>Template.dynamic template=showOneTimePurchases }}
    </div>

    <footer>
      <p>{{ customerFirstName }},</p>
      <p>Thank you for your business.
        Feel free to contact us if you have any questions about this report or our service.</p>
      <p>
        Cary &amp; Thomas<br>
        founders@askdouble.com
      </p>
    </footer>
  </div>
</template>

<template name="tableHeaderFiller">
  <th>&nbsp;</th>
</template>

<template name="assistantsInvoiceActualFormOneTimePurchasesTable">
  <table class="table table-responsive one-time-purchases">
    <tr>
      <th>Date</th>
      <th>Item</th>
      <th>Amount(HKD)</th>
      {{>Template.dynamic template=fillHeaderIfEditable}}
    </tr>
    {{#each oneTimePurchases }}
      {{> assistantInvoiceActualFormOneTimePurchase }}
    {{/each}}
  </table>
  <div class="add-one-time-purchase add {{showIfEditable}}">+ Entry</div>
</template>

<template name="assistantsInvoiceActualFormTimeBasedItemsTable">
  <table class="table table-responsive time-based-items">
    <tr>
      <th>Date</th>
      <th>Requests</th>
      <th>Actions</th>
      <th>Duration</th>
      {{>Template.dynamic template=fillHeaderIfEditable}}
    </tr>
    {{#each timeBasedItems}}
      {{> assistantInvoiceActualFormTimeBasedItem }}
    {{/each}}
  </table>
  <div class="add-time-based-item add {{showIfEditable}}">+ Entry</div>
</template>
